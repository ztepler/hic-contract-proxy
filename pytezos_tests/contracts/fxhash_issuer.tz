parameter (or
            (or
              (or (nat %burn)
                  (or (pair %mint (address %issuer_address) (nat %issuer_id))
                      (pair %mint_issuer (pair (nat %amount) (bool %enabled))
                                         (pair (map %metadata string bytes)
                                               (pair (mutez %price) (nat %royalties))))))
              (or (address %set_administrator)
                  (or (nat %set_fees) (bytes %set_gentk_void_metadata))))
            (or
              (or (pair %set_metadata (string %k) (bytes %v))
                  (or (mutez %set_min_price) (address %set_objkt_contract)))
              (or (or (bool %set_pause) (address %set_treasury_address))
                  (or (mutez %transfer_xtz_treasury)
                      (pair %update_issuer (pair (bool %enabled) (nat %issuer_id))
                                           (pair (mutez %price) (nat %royalties)))))));
storage (pair
          (pair
            (pair (address %administrator)
                  (pair (nat %all_gentk_tokens) (nat %all_tokens)))
            (pair (nat %fees)
                  (pair (bytes %gentk_void_metadata)
                        (big_map %ledger (pair address nat)
                                         (pair (pair (nat %balance) (bool %enabled))
                                               (pair (mutez %price)
                                                     (pair (nat %royalties)
                                                           (nat %supply))))))))
          (pair
            (pair
              (big_map %ledger_gentk nat
                                     (pair (nat %issuer_id)
                                           (pair (nat %iteration) (address %owner))))
              (pair (big_map %metadata string bytes) (mutez %min_price)))
            (pair (pair (address %objkt_contract) (bool %paused))
                  (pair
                    (big_map %token_metadata nat
                                             (pair (nat %token_id)
                                                   (map %token_info string bytes)))
                    (address %treasury_address)))));
code { CAST (pair
              (or
                (or
                  (or nat
                      (or (pair address nat)
                          (pair (pair nat bool)
                                (pair (map string bytes) (pair mutez nat)))))
                  (or address (or nat bytes)))
                (or (or (pair string bytes) (or mutez address))
                    (or (or bool address)
                        (or mutez (pair (pair bool nat) (pair mutez nat))))))
              (pair
                (pair (pair address (pair nat nat))
                      (pair nat
                            (pair bytes
                                  (big_map (pair address nat)
                                           (pair (pair nat bool)
                                                 (pair mutez (pair nat nat)))))))
                (pair
                  (pair (big_map nat (pair nat (pair nat address)))
                        (pair (big_map string bytes) mutez))
                  (pair (pair address bool)
                        (pair (big_map nat (pair nat (map string bytes))) address))))) ;
       UNPAIR ;
       IF_LEFT
         { IF_LEFT
             { IF_LEFT
                 { SWAP ;
                   DUP ;
                   DUG 2 ;
                   GET 5 ;
                   CDR ;
                   IF { PUSH string "Issuer_PAUSED" ; FAILWITH } {} ;
                   SWAP ;
                   DUP ;
                   DUG 2 ;
                   CAR ;
                   GET 6 ;
                   SWAP ;
                   DUP ;
                   DUG 2 ;
                   SENDER ;
                   PAIR ;
                   MEM ;
                   IF {} { PUSH string "Issuer_TOKEN_UNDEFINED" ; FAILWITH } ;
                   SWAP ;
                   DUP ;
                   DUG 2 ;
                   CAR ;
                   GET 6 ;
                   SWAP ;
                   DUP ;
                   DUG 2 ;
                   SENDER ;
                   PAIR ;
                   GET ;
                   IF_NONE { PUSH int 314 ; FAILWITH } {} ;
                   GET 6 ;
                   DUP 3 ;
                   CAR ;
                   GET 6 ;
                   DUP 3 ;
                   SENDER ;
                   PAIR ;
                   GET ;
                   IF_NONE { PUSH int 314 ; FAILWITH } {} ;
                   CAR ;
                   CAR ;
                   COMPARE ;
                   EQ ;
                   IF {} { PUSH string "CONSUMED_ONCE" ; FAILWITH } ;
                   SWAP ;
                   UNPAIR ;
                   UNPAIR ;
                   SWAP ;
                   UNPAIR ;
                   SWAP ;
                   UNPAIR ;
                   SWAP ;
                   NONE (pair (pair nat bool) (pair mutez (pair nat nat))) ;
                   DUP 7 ;
                   SENDER ;
                   PAIR ;
                   UPDATE ;
                   SWAP ;
                   PAIR ;
                   SWAP ;
                   PAIR ;
                   SWAP ;
                   PAIR ;
                   PAIR ;
                   DUP ;
                   GET 7 ;
                   NONE (pair nat (map string bytes)) ;
                   DIG 3 ;
                   UPDATE ;
                   UPDATE 7 ;
                   NIL operation }
                 { IF_LEFT
                     { SWAP ;
                       DUP ;
                       DUG 2 ;
                       GET 5 ;
                       CDR ;
                       IF { PUSH string "Issuer_PAUSED" ; FAILWITH } {} ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       CAR ;
                       GET 6 ;
                       SWAP ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 3 ;
                       CAR ;
                       PAIR ;
                       MEM ;
                       IF {} { PUSH string "Issuer_TOKEN_UNDEFINED" ; FAILWITH } ;
                       PUSH nat 0 ;
                       DUP 3 ;
                       CAR ;
                       GET 6 ;
                       DIG 2 ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 4 ;
                       CAR ;
                       PAIR ;
                       GET ;
                       IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                       CAR ;
                       CAR ;
                       COMPARE ;
                       GT ;
                       IF {} { PUSH string "TOKEN_NO_BALANCE" ; FAILWITH } ;
                       PUSH bool True ;
                       DUP 3 ;
                       CAR ;
                       GET 6 ;
                       DIG 2 ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 4 ;
                       CAR ;
                       PAIR ;
                       GET ;
                       IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                       CAR ;
                       CDR ;
                       COMPARE ;
                       EQ ;
                       IF {} { PUSH string "TOKEN_DISABLED" ; FAILWITH } ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       CAR ;
                       GET 6 ;
                       SWAP ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 3 ;
                       CAR ;
                       PAIR ;
                       GET ;
                       IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                       GET 3 ;
                       AMOUNT ;
                       COMPARE ;
                       GE ;
                       IF {} { PUSH string "NOT_ENOUGH_XTZ" ; FAILWITH } ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       UNPAIR ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       DUP 7 ;
                       CAR ;
                       GET 6 ;
                       DIG 6 ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 8 ;
                       CAR ;
                       PAIR ;
                       GET ;
                       IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                       GET 6 ;
                       DUP 8 ;
                       CAR ;
                       GET 6 ;
                       DIG 7 ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 9 ;
                       CAR ;
                       PAIR ;
                       GET ;
                       IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                       GET 5 ;
                       PAIR ;
                       DUP 8 ;
                       CAR ;
                       GET 6 ;
                       DIG 7 ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 9 ;
                       CAR ;
                       PAIR ;
                       GET ;
                       IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                       GET 3 ;
                       PAIR ;
                       DUP 8 ;
                       CAR ;
                       GET 6 ;
                       DIG 7 ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 9 ;
                       CAR ;
                       PAIR ;
                       GET ;
                       IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                       CAR ;
                       CDR ;
                       PUSH nat 1 ;
                       DIG 9 ;
                       CAR ;
                       GET 6 ;
                       DIG 9 ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 11 ;
                       CAR ;
                       PAIR ;
                       GET ;
                       IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                       CAR ;
                       CAR ;
                       SUB ;
                       ABS ;
                       PAIR ;
                       PAIR ;
                       SOME ;
                       DIG 6 ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 8 ;
                       CAR ;
                       PAIR ;
                       UPDATE ;
                       SWAP ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       PAIR ;
                       DUP ;
                       DUG 2 ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       UNPAIR ;
                       SENDER ;
                       DUP 7 ;
                       CAR ;
                       GET 6 ;
                       DIG 6 ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 8 ;
                       CAR ;
                       PAIR ;
                       GET ;
                       IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                       CAR ;
                       CAR ;
                       DUP 8 ;
                       CAR ;
                       GET 6 ;
                       DIG 7 ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 9 ;
                       CAR ;
                       PAIR ;
                       GET ;
                       IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                       GET 6 ;
                       SUB ;
                       ABS ;
                       DUP 7 ;
                       CDR ;
                       PAIR 3 ;
                       SOME ;
                       DIG 6 ;
                       CAR ;
                       CAR ;
                       GET 3 ;
                       UPDATE ;
                       PAIR ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       SWAP ;
                       PUSH mutez 0 ;
                       PUSH nat 1000 ;
                       DIG 3 ;
                       DUP ;
                       CAR ;
                       GET 3 ;
                       SWAP ;
                       DUP ;
                       DUG 5 ;
                       CAR ;
                       GET 6 ;
                       DIG 4 ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 6 ;
                       CAR ;
                       PAIR ;
                       GET ;
                       IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                       GET 3 ;
                       MUL ;
                       EDIV ;
                       IF_NONE { PUSH int 229 ; FAILWITH } {} ;
                       CAR ;
                       COMPARE ;
                       GT ;
                       IF
                         { NIL operation ;
                           DUP 3 ;
                           GET 8 ;
                           CONTRACT unit ;
                           IF_NONE
                             { PUSH string "PLATFORM_FEES_FAILED" ; FAILWITH }
                             {} ;
                           PUSH nat 1000 ;
                           DIG 4 ;
                           DUP ;
                           CAR ;
                           GET 3 ;
                           SWAP ;
                           DUP ;
                           DUG 6 ;
                           CAR ;
                           GET 6 ;
                           DIG 5 ;
                           DUP ;
                           CDR ;
                           SWAP ;
                           DUP ;
                           DUG 7 ;
                           CAR ;
                           PAIR ;
                           GET ;
                           IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                           GET 3 ;
                           MUL ;
                           EDIV ;
                           IF_NONE { PUSH int 229 ; FAILWITH } {} ;
                           CAR ;
                           UNIT ;
                           TRANSFER_TOKENS ;
                           CONS }
                         { NIL operation } ;
                       PUSH mutez 0 ;
                       PUSH nat 1000 ;
                       DIG 4 ;
                       DUP ;
                       CAR ;
                       GET 3 ;
                       SWAP ;
                       DUP ;
                       DUG 6 ;
                       CAR ;
                       GET 6 ;
                       DIG 5 ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 7 ;
                       CAR ;
                       PAIR ;
                       GET ;
                       IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                       GET 3 ;
                       MUL ;
                       EDIV ;
                       IF_NONE { PUSH int 229 ; FAILWITH } {} ;
                       CAR ;
                       DUP 5 ;
                       CAR ;
                       GET 6 ;
                       DIG 4 ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 6 ;
                       CAR ;
                       PAIR ;
                       GET ;
                       IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                       GET 3 ;
                       SUB ;
                       COMPARE ;
                       GT ;
                       IF
                         { SWAP ;
                           DUP ;
                           DUG 2 ;
                           CAR ;
                           CONTRACT unit ;
                           IF_NONE { PUSH string "CREATOR_FEES_FAILED" ; FAILWITH } {} ;
                           PUSH nat 1000 ;
                           DIG 4 ;
                           DUP ;
                           CAR ;
                           GET 3 ;
                           SWAP ;
                           DUP ;
                           DUG 6 ;
                           CAR ;
                           GET 6 ;
                           DIG 5 ;
                           DUP ;
                           CDR ;
                           SWAP ;
                           DUP ;
                           DUG 7 ;
                           CAR ;
                           PAIR ;
                           GET ;
                           IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                           GET 3 ;
                           MUL ;
                           EDIV ;
                           IF_NONE { PUSH int 229 ; FAILWITH } {} ;
                           CAR ;
                           DUP 5 ;
                           CAR ;
                           GET 6 ;
                           DIG 4 ;
                           DUP ;
                           CDR ;
                           SWAP ;
                           DUP ;
                           DUG 6 ;
                           CAR ;
                           PAIR ;
                           GET ;
                           IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                           GET 3 ;
                           SUB ;
                           UNIT ;
                           TRANSFER_TOKENS ;
                           CONS }
                         {} ;
                       DUP 3 ;
                       GET 5 ;
                       CAR ;
                       CONTRACT %mint (pair (pair address (pair nat nat))
                                            (pair (map string bytes) (pair nat nat))) ;
                       IF_NONE { PUSH string "INVALID_INTERFACE" ; FAILWITH } {} ;
                       PUSH mutez 0 ;
                       DIG 4 ;
                       DUP ;
                       CAR ;
                       CAR ;
                       GET 3 ;
                       SWAP ;
                       DUP ;
                       DUG 6 ;
                       CAR ;
                       GET 6 ;
                       DIG 5 ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 7 ;
                       CAR ;
                       PAIR ;
                       GET ;
                       IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                       GET 5 ;
                       PAIR ;
                       EMPTY_MAP string bytes ;
                       DUP 7 ;
                       CAR ;
                       GET 5 ;
                       SOME ;
                       PUSH string "" ;
                       UPDATE ;
                       PAIR ;
                       DUP 6 ;
                       CAR ;
                       GET 6 ;
                       DIG 5 ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 7 ;
                       CAR ;
                       PAIR ;
                       GET ;
                       IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                       CAR ;
                       CAR ;
                       DUP 7 ;
                       CAR ;
                       GET 6 ;
                       DIG 6 ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 8 ;
                       CAR ;
                       PAIR ;
                       GET ;
                       IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                       GET 6 ;
                       SUB ;
                       ABS ;
                       DIG 5 ;
                       CDR ;
                       PAIR ;
                       SENDER ;
                       PAIR ;
                       PAIR ;
                       TRANSFER_TOKENS ;
                       CONS ;
                       SWAP ;
                       UNPAIR ;
                       UNPAIR ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       PUSH nat 1 ;
                       ADD ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       PAIR ;
                       PAIR ;
                       SWAP }
                     { SWAP ;
                       DUP ;
                       DUG 2 ;
                       GET 5 ;
                       CDR ;
                       IF { PUSH string "Issuer_PAUSED" ; FAILWITH } {} ;
                       DUP ;
                       GET 6 ;
                       PUSH nat 100 ;
                       SWAP ;
                       COMPARE ;
                       GE ;
                       IF
                         { DUP ; GET 6 ; PUSH nat 250 ; SWAP ; COMPARE ; LE }
                         { PUSH bool False } ;
                       IF
                         { PUSH bool True }
                         { DUP ;
                           CAR ;
                           CDR ;
                           PUSH bool False ;
                           COMPARE ;
                           EQ ;
                           IF
                             { DUP ; GET 6 ; PUSH nat 250 ; SWAP ; COMPARE ; LE }
                             { PUSH bool False } } ;
                       IF {} { PUSH string "INVALID ROYALTIES" ; FAILWITH } ;
                       DUP ;
                       CAR ;
                       CDR ;
                       PUSH bool False ;
                       COMPARE ;
                       EQ ;
                       IF
                         { PUSH bool True }
                         { SWAP ; DUP ; DUG 2 ; GET 3 ; GET 4 ; SWAP ; DUP ; DUG 2 ; GET 5 ; COMPARE ; GE } ;
                       IF {} { PUSH string "PRICE_TOO_LOW" ; FAILWITH } ;
                       SWAP ;
                       DUP ;
                       CAR ;
                       GET 6 ;
                       SWAP ;
                       DUP ;
                       DUG 3 ;
                       CAR ;
                       CAR ;
                       GET 4 ;
                       SENDER ;
                       PAIR ;
                       MEM ;
                       IF { PUSH string "TOKEN ALREADY EXISTS" ; FAILWITH } {} ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       UNPAIR ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       DIG 5 ;
                       DUP ;
                       CAR ;
                       CAR ;
                       SWAP ;
                       DUP ;
                       DUG 7 ;
                       GET 6 ;
                       PAIR ;
                       DUP 7 ;
                       GET 5 ;
                       PAIR ;
                       DIG 6 ;
                       DUP ;
                       CAR ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 8 ;
                       CAR ;
                       CAR ;
                       PAIR ;
                       PAIR ;
                       SOME ;
                       DIG 7 ;
                       CAR ;
                       CAR ;
                       GET 4 ;
                       SENDER ;
                       PAIR ;
                       UPDATE ;
                       SWAP ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       PAIR ;
                       DUP ;
                       DUG 2 ;
                       DUP ;
                       GET 7 ;
                       DIG 2 ;
                       GET 3 ;
                       DUP 4 ;
                       CAR ;
                       CAR ;
                       GET 4 ;
                       PAIR ;
                       SOME ;
                       DIG 3 ;
                       CAR ;
                       CAR ;
                       GET 4 ;
                       UPDATE ;
                       UPDATE 7 ;
                       DUP ;
                       CAR ;
                       CAR ;
                       GET 4 ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       CAR ;
                       CAR ;
                       GET 4 ;
                       COMPARE ;
                       EQ ;
                       IF
                         {}
                         { PUSH string "Token-IDs should be consecutive" ; FAILWITH } ;
                       DUP ;
                       UNPAIR ;
                       UNPAIR ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       PUSH nat 1 ;
                       DIG 6 ;
                       CAR ;
                       CAR ;
                       GET 4 ;
                       ADD ;
                       SWAP ;
                       DUP ;
                       DUP 3 ;
                       COMPARE ;
                       LE ;
                       IF { SWAP ; DROP } { DROP } ;
                       SWAP ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       PAIR ;
                       PAIR ;
                       NIL operation } } }
             { IF_LEFT
                 { SWAP ;
                   DUP ;
                   DUG 2 ;
                   CAR ;
                   CAR ;
                   CAR ;
                   SENDER ;
                   COMPARE ;
                   EQ ;
                   IF {} { PUSH string "Issuer_NOT_ADMIN" ; FAILWITH } ;
                   SWAP ;
                   UNPAIR ;
                   UNPAIR ;
                   CDR ;
                   DIG 3 ;
                   PAIR ;
                   PAIR ;
                   PAIR }
                 { IF_LEFT
                     { SWAP ;
                       DUP ;
                       DUG 2 ;
                       CAR ;
                       CAR ;
                       CAR ;
                       SENDER ;
                       COMPARE ;
                       EQ ;
                       IF {} { PUSH string "Issuer_NOT_ADMIN" ; FAILWITH } ;
                       SWAP ;
                       UNPAIR ;
                       UNPAIR ;
                       SWAP ;
                       CDR ;
                       DIG 3 ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       PAIR }
                     { SWAP ;
                       DUP ;
                       DUG 2 ;
                       CAR ;
                       CAR ;
                       CAR ;
                       SENDER ;
                       COMPARE ;
                       EQ ;
                       IF {} { PUSH string "Issuer_NOT_ADMIN" ; FAILWITH } ;
                       SWAP ;
                       UNPAIR ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       CDR ;
                       DIG 4 ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       PAIR } } ;
               NIL operation } }
         { IF_LEFT
             { IF_LEFT
                 { SWAP ;
                   DUP ;
                   DUG 2 ;
                   CAR ;
                   CAR ;
                   CAR ;
                   SENDER ;
                   COMPARE ;
                   EQ ;
                   IF {} { PUSH string "Issuer_NOT_ADMIN" ; FAILWITH } ;
                   SWAP ;
                   UNPAIR ;
                   SWAP ;
                   UNPAIR ;
                   UNPAIR ;
                   SWAP ;
                   UNPAIR ;
                   DUP 6 ;
                   CDR ;
                   SOME ;
                   DIG 6 ;
                   CAR ;
                   UPDATE ;
                   PAIR ;
                   SWAP ;
                   PAIR ;
                   PAIR ;
                   SWAP ;
                   PAIR }
                 { IF_LEFT
                     { SWAP ;
                       DUP ;
                       DUG 2 ;
                       CAR ;
                       CAR ;
                       CAR ;
                       SENDER ;
                       COMPARE ;
                       EQ ;
                       IF {} { PUSH string "Issuer_NOT_ADMIN" ; FAILWITH } ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       UNPAIR ;
                       SWAP ;
                       CAR ;
                       DIG 4 ;
                       SWAP ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       PAIR ;
                       SWAP ;
                       PAIR }
                     { SWAP ;
                       DUP ;
                       DUG 2 ;
                       CAR ;
                       CAR ;
                       CAR ;
                       SENDER ;
                       COMPARE ;
                       EQ ;
                       IF {} { PUSH string "Issuer_NOT_ADMIN" ; FAILWITH } ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       CDR ;
                       DIG 4 ;
                       PAIR ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       SWAP ;
                       PAIR } } ;
               NIL operation }
             { IF_LEFT
                 { IF_LEFT
                     { SWAP ;
                       DUP ;
                       DUG 2 ;
                       CAR ;
                       CAR ;
                       CAR ;
                       SENDER ;
                       COMPARE ;
                       EQ ;
                       IF {} { PUSH string "Issuer_NOT_ADMIN" ; FAILWITH } ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       CAR ;
                       DIG 4 ;
                       SWAP ;
                       PAIR ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       SWAP ;
                       PAIR }
                     { SWAP ;
                       DUP ;
                       DUG 2 ;
                       CAR ;
                       CAR ;
                       CAR ;
                       SENDER ;
                       COMPARE ;
                       EQ ;
                       IF {} { PUSH string "Issuer_NOT_ADMIN" ; FAILWITH } ;
                       UPDATE 8 } ;
                   NIL operation }
                 { IF_LEFT
                     { SWAP ;
                       DUP ;
                       DUG 2 ;
                       CAR ;
                       CAR ;
                       CAR ;
                       SENDER ;
                       COMPARE ;
                       EQ ;
                       IF {} { PUSH string "Issuer_NOT_ADMIN" ; FAILWITH } ;
                       DUP ;
                       BALANCE ;
                       COMPARE ;
                       GE ;
                       IF {} { PUSH string "INSUFFISCIENT_BALANCE" ; FAILWITH } ;
                       NIL operation ;
                       DUP 3 ;
                       GET 8 ;
                       CONTRACT unit ;
                       IF_NONE { PUSH string "XTZ_TRANSFER_FAILED" ; FAILWITH } {} ;
                       DIG 2 ;
                       UNIT ;
                       TRANSFER_TOKENS ;
                       CONS }
                     { SWAP ;
                       DUP ;
                       DUG 2 ;
                       GET 5 ;
                       CDR ;
                       IF { PUSH string "Issuer_PAUSED" ; FAILWITH } {} ;
                       DUP ;
                       GET 4 ;
                       PUSH nat 100 ;
                       SWAP ;
                       COMPARE ;
                       GE ;
                       IF
                         { DUP ; GET 4 ; PUSH nat 250 ; SWAP ; COMPARE ; LE }
                         { PUSH bool False } ;
                       IF {} { PUSH string "INVALID ROYALTIES" ; FAILWITH } ;
                       DUP ;
                       CAR ;
                       CAR ;
                       PUSH bool False ;
                       COMPARE ;
                       EQ ;
                       IF
                         { PUSH bool True }
                         { SWAP ; DUP ; DUG 2 ; GET 3 ; GET 4 ; SWAP ; DUP ; DUG 2 ; GET 3 ; COMPARE ; GE } ;
                       IF {} { PUSH string "PRICE_TOO_LOW" ; FAILWITH } ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       CAR ;
                       GET 6 ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       CAR ;
                       CDR ;
                       SENDER ;
                       PAIR ;
                       MEM ;
                       IF {} { PUSH string "Issuer_TOKEN_UNDEFINED" ; FAILWITH } ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       UNPAIR ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       DUP 7 ;
                       CAR ;
                       GET 6 ;
                       DUP 7 ;
                       CAR ;
                       CDR ;
                       SENDER ;
                       PAIR ;
                       GET ;
                       IF_NONE { PUSH int 292 ; FAILWITH } {} ;
                       GET 6 ;
                       DUP 7 ;
                       GET 4 ;
                       PAIR ;
                       DUP 7 ;
                       GET 3 ;
                       PAIR ;
                       DUP 7 ;
                       CAR ;
                       CAR ;
                       DIG 8 ;
                       CAR ;
                       GET 6 ;
                       DUP 9 ;
                       CAR ;
                       CDR ;
                       SENDER ;
                       PAIR ;
                       GET ;
                       IF_NONE { PUSH int 292 ; FAILWITH } {} ;
                       CAR ;
                       CAR ;
                       PAIR ;
                       PAIR ;
                       SOME ;
                       DIG 6 ;
                       CAR ;
                       CDR ;
                       SENDER ;
                       PAIR ;
                       UPDATE ;
                       SWAP ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       PAIR ;
                       NIL operation } } } } ;
       NIL operation ;
       SWAP ;
       ITER { CONS } ;
       PAIR }